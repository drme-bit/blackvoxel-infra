apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - deployment.yaml

# This is a base; do not pin a namespace here.
# Environment overlays (e.g. `envs/staging`, `envs/prod`) should set namespaces
# to avoid accidentally deploying staging/prod into the wrong namespace.
#
# NOTE: If you need per-environment differences (namespaces, secrets, image tags),
# do them in the env overlay with `namespace:` and `patches`.

commonLabels:
  app: discord-bot

images:
  - name: ghcr.io/drme-bit/discord-bot
    newTag: latest

generatorOptions:
  disableNameSuffixHash: true

# Note:
# - The bot does not need a Service (it doesn't expose network ports).
# - Secrets must exist in the target namespace (staging/prod) under the name `discord-env`.
# - For GitOps, prefer SealedSecrets or ExternalSecrets instead of committing plaintext secrets.
