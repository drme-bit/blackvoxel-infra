apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - deployment.yaml
  - service.yaml

namespace: blackvoxel

commonLabels:
  app: cloudflared

# Notes:
# - `service.yaml` contains a Secret manifest named `cloudflared-creds` with a placeholder.
#   Do NOT commit real credentials in plaintext. Replace the placeholder with a SealedSecret
#   or use ExternalSecrets / CI to inject the secret into the cluster.
# - The deployment mounts the secret at /etc/cloudflared; ensure the secret contains
#   the Cloudflared credentials file under the key `credentials.json`.
# Example to create the secret locally (not for git):
# kubectl -n blackvoxel create secret generic cloudflared-creds --from-file=credentials.json=/path/to/credentials.json
